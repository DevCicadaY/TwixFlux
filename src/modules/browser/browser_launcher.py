import json  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å json –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –¥–∞–Ω–Ω—ã–º–∏.
import os  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å os –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π, –ø—É—Ç—è–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏.
from selenium import webdriver  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º webdriver –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º —á–µ—Ä–µ–∑ Selenium.
from src.utils import global_vars  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞.
from selenium.webdriver.chrome.service import Service  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å Chrome –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º ChromeDriver.
from selenium.webdriver.chrome.options import Options  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –æ–ø—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞.
from src.utils.logger import logger  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–≥–µ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ.
from src.utils.config_loader import load_config  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞.

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É—Ç–∏ –∫ –¥—Ä–∞–π–≤–µ—Ä—É
logger.info("üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é...")  # –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
config = load_config()  # –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞.
logger.info(f"‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞: {config}")  # –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

# –ü–æ–ª—É—á–∞–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ Chrome –¥—Ä–∞–π–≤–µ—Ä—É –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
chrome_driver_relative_path = config["chrome_driver_path"]  # –ò–∑–≤–ª–µ–∫–∞–µ–º –ø—É—Ç—å –∫ ChromeDriver –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
logger.info(f"üîë –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –¥—Ä–∞–π–≤–µ—Ä—É: {chrome_driver_relative_path}")  # –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –¥—Ä–∞–π–≤–µ—Ä—É.

# –ü–æ–ª—É—á–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –ø—É—Ç–∏
project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..'))  # –ü–æ–ª—É—á–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞.
logger.info(f"üìÇ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞: {project_root}")  # –õ–æ–≥–∏—Ä—É–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞.

# –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –¥—Ä–∞–π–≤–µ—Ä—É, —É–±–∏—Ä–∞—è –≤–æ–∑–º–æ–∂–Ω—ã–π –≤–µ–¥—É—â–∏–π —Å–ª—ç—à
chrome_driver_path1 = os.path.join(project_root, chrome_driver_relative_path.lstrip('/'))  # –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ ChromeDriver.
logger.info(f"üîß –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ Chrome –¥—Ä–∞–π–≤–µ—Ä—É: {chrome_driver_path1}")  # –õ–æ–≥–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –¥—Ä–∞–π–≤–µ—Ä—É.

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø—Ü–∏–π –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
def get_browser_options(browser_mode):
    logger.info(f"üõ†Ô∏è –ü–æ–ª—É—á–∞–µ–º –æ–ø—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —Ä–µ–∂–∏–º–∞: {'headless' if browser_mode else 'normal'}")  # –õ–æ–≥–∏—Ä—É–µ–º, –∫–∞–∫–æ–π —Ä–µ–∂–∏–º –≤—ã–±—Ä–∞–Ω –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞.
    options = Options()  # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±—Ä–∞—É–∑–µ—Ä–∞.
    options.add_argument("--no-sandbox")  # –û—Ç–∫–ª—é—á–∞–µ–º –ø–µ—Å–æ—á–Ω–∏—Ü—É –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
    options.add_argument("--disable-dev-shm-usage")  # –û—Ç–∫–ª—é—á–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏.
    options.add_argument("--mute-audio")  # –û—Ç–∫–ª—é—á–∞–µ–º –∑–≤—É–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
    options.add_argument("--disable-extensions")  # –û—Ç–∫–ª—é—á–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞.
    
    if browser_mode:
        options.add_argument("--headless")  # –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –±–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (headless).
        options.add_argument("--disable-gpu")  # –û—Ç–∫–ª—é—á–∞–µ–º –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ.
        options.add_argument("--remote-debugging-port=9222")  # –í–∫–ª—é—á–∞–µ–º –ø–æ—Ä—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏.
    
    logger.info(f"‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞: {options.arguments}")  # –õ–æ–≥–∏—Ä—É–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞.
    return options  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞.

# –ó–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ —Å –Ω—É–∂–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
def start_browser(chrome_driver_path, options):
    """
    –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Å—Å–∏–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π.
    """
    try:
        logger.info("üöÄ –ó–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞...")  # –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞—á–∞–ª–æ –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞.
        service = Service(chrome_driver_path1)  # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–º ChromeDriver.
        driver = webdriver.Chrome(service=service, options=options)  # –ó–∞–ø—É—Å–∫–∞–µ–º –±—Ä–∞—É–∑–µ—Ä —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –¥—Ä–∞–π–≤–µ—Ä–æ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.
        
        logger.info("‚úÖ –ë—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω.")  # –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞.

        # –ò–∑–≤–ª–µ–∫–∞–µ–º session_id —Å driver –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
        global_vars.session_id = driver.session_id  # –°–æ—Ö—Ä–∞–Ω—è–µ–º session_id –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.
        logger.info(f"üéØ Session ID: {global_vars.session_id} - –ë—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω! üöÄ")  # –õ–æ–≥–∏—Ä—É–µ–º session_id.

        # –ò–∑–≤–ª–µ–∫–∞–µ–º driver –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
        global_vars.driver = driver  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—ä–µ–∫—Ç driver –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.
        logger.info(f"üîë –≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è driver –∑–∞–≤–µ—Ä—à–µ–Ω–∞: {global_vars.driver}")  # –õ–æ–≥–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç driver.

        # –ò–∑–≤–ª–µ–∫–∞–µ–º PID —Å driver –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
        global_vars.pid = driver.service.process.pid  # –ü–æ–ª—É—á–∞–µ–º PID –ø—Ä–æ—Ü–µ—Å—Å–∞ –±—Ä–∞—É–∑–µ—Ä–∞.
        logger.info(f"üî¢ PID –ø—Ä–æ—Ü–µ—Å—Å–∞ –±—Ä–∞—É–∑–µ—Ä–∞: {global_vars.pid}")  # –õ–æ–≥–∏—Ä—É–µ–º PID –ø—Ä–æ—Ü–µ—Å—Å–∞ –±—Ä–∞—É–∑–µ—Ä–∞.

        # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL —Å–µ—Ä–≤–µ—Ä–∞ WebDriver
        if driver.service:
            global_vars.server_url = driver.service.service_url  # –ò–∑–≤–ª–µ–∫–∞–µ–º URL —Å–µ—Ä–≤–µ—Ä–∞ WebDriver.
            logger.info(f"üåê URL —Å–µ—Ä–≤–µ—Ä–∞ WebDriver: {global_vars.server_url}")  # –õ–æ–≥–∏—Ä—É–µ–º URL —Å–µ—Ä–≤–µ—Ä–∞ WebDriver.
        else:
            global_vars.server_url = None  # –ï—Å–ª–∏ URL –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –µ–≥–æ –≤ None.
            logger.warning("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å WebDriver URL —á–µ—Ä–µ–∑ service.")  # –õ–æ–≥–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.
            logger.info(f"üîç –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ WebDriver: {driver.capabilities}")  # –õ–æ–≥–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ WebDriver.
        
        # –õ–æ–≥–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        logger.info(f"üìä –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: session_id={global_vars.session_id}, driver={global_vars.driver}, pid={global_vars.pid}, server_url={global_vars.server_url}")  # –õ–æ–≥–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

        return driver  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç driver –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞: {e}")  # –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞.
        exit()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏.

# –ó–∞–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —Å–±—Ä–æ—Å –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
def quit_browser(driver):
    """
    –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —Å–±—Ä–æ—Å–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
    """
    if driver and hasattr(driver, "session_id") and driver.session_id:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç session_id.
        try:
            # –õ–æ–≥–∏—Ä—É–µ–º –ø–æ–ø—ã—Ç–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
            session_id = driver.session_id  # –ò–∑–≤–ª–µ–∫–∞–µ–º session_id –±—Ä–∞—É–∑–µ—Ä–∞.
            current_url = driver.current_url if hasattr(driver, "current_url") else "URL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"  # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π URL, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω.
            page_title = driver.title if hasattr(driver, "title") else "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"  # –ü–æ–ª—É—á–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω.
            
            logger.info(f"‚ùå –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ üñ•Ô∏è: session_id={session_id}, URL={current_url}, title={page_title}")  # –õ–æ–≥–∏—Ä—É–µ–º –ø–æ–ø—ã—Ç–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞.
            driver.quit()  # –ó–∞–∫—Ä—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä.
            reset_global_vars()  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
            logger.info("‚úÖ –ë—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç üõë.")  # –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞.
            return None  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º None, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –æ–±—ä–µ–∫—Ç driver.
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞: {e}", exc_info=True)  # –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞.
            return driver  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç driver, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –µ–≥–æ –∑–∞–∫—Ä—ã—Ç—å.
    else:
        logger.info("üí§ –ë—Ä–∞—É–∑–µ—Ä —É–∂–µ –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω. üí§")  # –õ–æ–≥–∏—Ä—É–µ–º, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä —É–∂–µ –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω.
        return driver  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç driver.

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º
def reset_global_vars():
    """
    –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º.
    """
    try:
        logger.info("üîÑ –°–±—Ä–æ—Å –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö...")  # –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞—á–∞–ª–æ —Å–±—Ä–æ—Å–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        global_vars.session_id = None  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º session_id.
        global_vars.driver = None  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º driver.
        global_vars.pid = None  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º PID.
        global_vars.server_url = None  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º URL —Å–µ—Ä–≤–µ—Ä–∞ WebDriver.

        logger.info("‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω—ã!")  # –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω–æ–µ –æ—á–∏—â–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: {e}")  # –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –ø—Ä–∏ —Å–±—Ä–æ—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.